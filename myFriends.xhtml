<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>My Friends</title>
        <h:outputStylesheet library="css" name="navbar.css"  />
        <meta charset="UTF-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
        <meta http-equiv="X-UA-compatible" content="IE=edge"></meta>
        <h:outputStylesheet  name="login/vendor/bootstrap/css/bootstrap.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/fonts/font-awesome-4.7.0/css/font-awesome.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/fonts/Linearicons-Free-v1.0.0/icon-font.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/vendor/animate/animate.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/vendor/css-hamburgers/hamburgers.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/vendor/animsition/css/animsition.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/vendor/select2/select2.min.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/vendor/daterangepicker/daterangepicker.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/css/util.css"></h:outputStylesheet>
        <h:outputStylesheet  name="login/css/main.css"></h:outputStylesheet>
        <h:outputStylesheet  name="registration/images/icons/favicon.ico"/>


        <style>
            .pic
            {
                background-color:aliceblue;
                text-align: center;
                background-size: cover;
                padding:0px;
                margin: 0px;
            }          
        </style>
        
    </h:head>
    <h:body>
        <center>
        <h:panelGroup rendered="#{empty user}">
            <h1>No Valid Session</h1>
            <h2>Please login in</h2>        
            <p><a href="faces/index.xhtml">Click here to go to login/create profile</a>.</p>
            
        </h:panelGroup>   
        <h:panelGroup rendered="#{not empty user}">
        <div>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="myProfile.xhtml">Welcome #{user}</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                <a class="nav-link" href="Home.xhtml" value="Home.xhtml">Home<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="myProfile.xhtml" value="myProfile.xhtml">View My Profile</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="newSearch.xhtml" value="newSearch.xhtml">New Search</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="friendsMenu.xhtml" value="friendsMenu.xhtml">Friends</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="topProfiles.xhtml" value="topProfiles.xhtml">View Top Profiles</a>
                </li>
            </ul>
            <h:form class="form-inline my-2 my-lg-0">
            <h:commandButton value="Logout" class="btn btn-outline-success my-2 my-sm-0" 
           onclick="if (! confirm('Are you sure you want to logout?')) return false" type="submit" action="#{loginBean.logout()}"></h:commandButton>
            </h:form>
            </div>
        </nav>
        </div>
            
            <h3>Friends</h3>

            <div>  <!-- COPY THIS -->
                <style type="text/css"> 
                    .ui-dataview-list .ui-dataview-row {
                        border-bottom: 1px solid #A8A8A8;
                        padding: 25px 10px;
                        /* with the exported variables from Nova and Luna Themes*/
                    }
                    .logo {
                        width: 5%;
                    }
                    .detail {
                        width: 85%;
                        padding-left: 25px;
                    }
                </style>

                <h:form id="form">
                    <p:dataView var="fre" value="#{myFriendsBean.friends}" rows="12" paginator="true" 
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} ">
                                <!--gridIcon="pi pi-th-large" listIcon="pi pi-bars" -->
                        <f:facet name="header">
                            My Friends
                        </f:facet>

                        <p:dataViewListItem>
                            <h:panelGrid columns="5" style="width:100%;"  >
                                <p:graphicImage width="150" height="150" value="resources/images/male.png" rendered="#{fre.gender eq 'male'}"/>
                                <p:graphicImage width="150" height="150" value="resources/images/female.png" rendered="#{fre.gender eq 'female'}"/>
                                <p:outputPanel style=""  >
                                    <h:panelGrid columns="2" cellpadding="10">
                                        <h:outputText value="Username:" />
                                        <h:outputText value="#{fre.username}" style="font-weight: bold"/>

                                        <h:outputText value="Gender:" />
                                        <h:outputText value="#{fre.gender}" style="font-weight: bold"/>

                                        <h:outputText value="Age:" />
                                        <h:outputText value="#{fre.age}" style="font-weight: bold"/>
                                    </h:panelGrid>
                                </p:outputPanel>
                                
                                <p:outputPanel >
                                    <h:panelGrid columns="2" cellpadding="7" >
                                        <h:outputText value="Location:" />
                                        <h:outputText value="#{fre.location}" style="font-weight: bold"/>

                                        <h:outputText value="Profile Views:" />
                                        <h:outputText value="#{fre.views}" style="font-weight: bold"/>

                                        <h:outputText value="Last online Date:" />
                                        <h:outputText value="#{fre.lastOnline}" style="font-weight: bold"/>
                                    </h:panelGrid>
                                </p:outputPanel>
                                
                                <p:outputPanel >
                                    <h:panelGrid columns="2" cellpadding="7" >
                                        <h:outputText value="Interest 1:" />
                                        <h:outputText value="#{fre.interest1}" style="font-weight: bold"/>

                                        <h:outputText value="Interest 2:" />
                                        <h:outputText value="#{fre.interest2}" style="font-weight: bold"/>

                                        <h:outputText value="Interest 3:" />
                                        <h:outputText value="#{fre.interest3}" style="font-weight: bold"/>
                                    </h:panelGrid>
                                </p:outputPanel>                                
                                
                                <p:outputPanel >
                                    <h:panelGrid columns="1" cellpadding="7" >
                                    <p:commandButton update=":form:sendMessage" oncomplete="PF('sendDialog').show()" title="Send a Message">
                                        
                                        <f:setPropertyActionListener value="#{fre}" target="#{myFriendsBean.friend}" />
                                    </p:commandButton>
                                    <p:commandButton update=":form:viewMessages" oncomplete="PF('viewDialog').show()" title="View Messages">
                                        
                                        <f:setPropertyActionListener value="#{fre}" target="#{myFriendsBean.friend}" />
                                    </p:commandButton>   
                                    </h:panelGrid>
                                </p:outputPanel>

                            </h:panelGrid>
                        </p:dataViewListItem>
                        <f:facet name="footer">
                            You have #{myFriendsBean.friends.size()} friends
                        </f:facet>                                
                    </p:dataView>

                    <p:dialog header="Send a Message" widgetVar="sendDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                        <p:outputPanel id="sendMessage" style="text-align:center;">
                            <p:panelGrid  columns="2" rendered="#{not empty myFriendsBean.friend}" columnClasses="label,value">
                                <f:facet name="header">
                                    <!-- image -->
                                </f:facet>
                                <h:outputText value="Send Message " />

                            </p:panelGrid>
                        </p:outputPanel>
                    </p:dialog>
                    
                    <p:dialog header="View Messages" widgetVar="viewDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                        <p:outputPanel id="viewMessages" style="text-align:center;">
                            <p:panelGrid  columns="2" rendered="#{not empty myFriendsBean.friend}" columnClasses="label,value">
                                <f:facet name="header">
                                    <!-- image -->
                                </f:facet>
                                <h:outputText value="View Message" />

                            </p:panelGrid>
                        </p:outputPanel>
                    </p:dialog>
                </h:form>                  
            </div> <!-- COPY THIS -->
        </h:panelGroup>
        </center>
    </h:body>
</html>

